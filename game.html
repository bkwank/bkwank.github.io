<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ìˆ² ì† ì†Œë…„ì˜ ì„±ê²½, ì‹­ìê°€ ìˆ˜ì§‘ ê²Œì„</title>
  <style>
    body { background: #b2e59f; margin: 0; }
    canvas { display: block; margin: 30px auto; background: #7ec850; border: 3px solid #333; }
    #score { text-align: center; font-size: 1.5em; margin-top: 10px; }
  </style>
</head>
<body>
  <canvas id="game" width="480" height="320"></canvas>
  <div id="score">ì ìˆ˜: 0</div>
  <div style="text-align:center;"><button id="restartBtn" style="display:none;font-size:1.2em;">ë‹¤ì‹œ ì‹œì‘í•˜ê¸°</button></div>
  <script>
    const canvas = document.getElementById('game');
    const ctx = canvas.getContext('2d');
    const tile = 40;
    const mapW = canvas.width / tile;
    const mapH = canvas.height / tile;
    // ìºë¦­í„°, ì•„ì´í…œ ì´ëª¨ì§€
    const playerEmoji = '<img src="data:image/svg+xml;utf8,<svg width='80' height='110' viewBox='0 0 80 110' fill='none' xmlns='http://www.w3.org/2000/svg'><ellipse cx='40' cy='75' rx='24' ry='32' fill='%238AC6FF' stroke='%234682B4' stroke-width='2'/><ellipse cx='40' cy='36' rx='20' ry='21' fill='%23FFD9A0' stroke='%23E2BB7B' stroke-width='2'/><rect x='23' y='99' width='10' height='9' rx='5' fill='%23444'/><rect x='47' y='99' width='10' height='9' rx='5' fill='%23444'/><rect x='9' y='67' width='9' height='25' rx='4.5' fill='%23FFD9A0' transform='rotate(-20 9 67)'/><rect x='62' y='67' width='9' height='25' rx='4.5' fill='%23FFD9A0' transform='rotate(20 62 67)'/><ellipse cx='33' cy='34' rx='2.2' ry='3.2' fill='%23252525'/><ellipse cx='47' cy='34' rx='2.2' ry='3.2' fill='%23252525'/><ellipse cx='32.2' cy='33' rx='0.6' ry='0.9' fill='%23fff' opacity='0.7'/><ellipse cx='46.2' cy='33' rx='0.6' ry='0.9' fill='%23fff' opacity='0.7'/><path d='M34 42 Q40 48 46 42' stroke='%23BB6C41' stroke-width='2' fill='none'/><path d='M22 30 Q40 18 58 30' stroke='%237B5823' stroke-width='6' fill='none' stroke-linecap='round'/><ellipse cx='23' cy='40' rx='5' ry='7' fill='%23A78450'/><ellipse cx='57' cy='40' rx='5' ry='7' fill='%23A78450'/><ellipse cx='32' cy='40' rx='2.4' ry='1.5' fill='%23FFC2B5' opacity='0.5'/><ellipse cx='48' cy='40' rx='2.4' ry='1.5' fill='%23FFC2B5' opacity='0.5'/></svg>" width="80" height="110" style="vertical-align: middle;"/>';
    const crossEmoji = 'âœï¸';
    const bibleEmoji = 'ğŸ“–';
    // í”Œë ˆì´ì–´
    let player = { x: 2, y: 2 };
    // ì•„ì´í…œë“¤
    let items = [
      { x: 6, y: 4, type: 'cross' },
      { x: 10, y: 2, type: 'bible' },
      { x: 3, y: 7, type: 'cross' },
      { x: 8, y: 6, type: 'bible' }
    ];
    let score = 0;
    let gameOver = false;
    const restartBtn = document.getElementById('restartBtn');

    // ìˆ² ë°°ê²½ (ë‚˜ë¬´ ìœ„ì¹˜ ê³ ì •)
    let trees = [];
    for (let y = 0; y < mapH; y++) {
      for (let x = 0; x < mapW; x++) {
        if (Math.random() < 0.08) trees.push({x, y});
      }
    }
    function draw() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      // ìˆ² ë°°ê²½ (ë‚˜ë¬´ ì´ëª¨ì§€ ëœë¤ ë°°ì¹˜)
      // for (let y = 0; y < mapH; y++) {
      //   for (let x = 0; x < mapW; x++) {
      //     if (Math.random() < 0.08) ctx.fillText('ğŸŒ²', x * tile + 8, y * tile + 32);
      //   }
      // }
      // ìˆ² ë°°ê²½ (ê³ ì •ëœ ë‚˜ë¬´)
      ctx.font = '32px serif';
      trees.forEach(tree => {
        ctx.fillText('ğŸŒ²', tree.x * tile + 8, tree.y * tile + 32);
      });
      // ì•„ì´í…œ
      items.forEach(item => {
        // ctx.font = '32px serif';
        ctx.fillText(item.type === 'cross' ? crossEmoji : bibleEmoji, item.x * tile + 8, item.y * tile + 32);
      });
      // í”Œë ˆì´ì–´
      // ctx.font = '32px serif';
      ctx.fillText(playerEmoji, player.x * tile + 8, player.y * tile + 32);
    }
    function update() {
      // ë‚˜ë¬´ì™€ ì¶©ëŒ ì²´í¬
      for (let i = 0; i < trees.length; i++) {
        if (trees[i].x === player.x && trees[i].y === player.y) {
          gameOver = true;
          document.getElementById('score').innerHTML = 'ì ìˆ˜: ' + score + '<br>ê²Œì„ ì˜¤ë²„!';
          restartBtn.style.display = 'inline-block';
          return;
        }
      }
      // ì•„ì´í…œê³¼ ì¶©ëŒ ì²´í¬
      for (let i = items.length - 1; i >= 0; i--) {
        if (items[i].x === player.x && items[i].y === player.y) {
          score++;
          items.splice(i, 1);
          document.getElementById('score').textContent = 'ì ìˆ˜: ' + score;
        }
      }
      // ëª¨ë“  ì•„ì´í…œì„ ìˆ˜ì§‘í–ˆëŠ”ì§€ ì²´í¬
      if (items.length === 0 && !gameOver) {
        gameOver = true;
        document.getElementById('score').innerHTML = 'ì ìˆ˜: ' + score + '<br>ìˆ˜ì§‘ì™„ë£Œ!';
        restartBtn.style.display = 'inline-block';
      }
    }
    document.addEventListener('keydown', e => {
      if (gameOver) return;
      if (e.key === 'ArrowUp' && player.y > 0) player.y--;
      if (e.key === 'ArrowDown' && player.y < mapH - 1) player.y++;
      if (e.key === 'ArrowLeft' && player.x > 0) player.x--;
      if (e.key === 'ArrowRight' && player.x < mapW - 1) player.x++;
      update();
      draw();
    });
    restartBtn.onclick = function() {
      // ê²Œì„ ìƒíƒœ ì´ˆê¸°í™”
      player = { x: 2, y: 2 };
      items = [
        { x: 6, y: 4, type: 'cross' },
        { x: 10, y: 2, type: 'bible' },
        { x: 3, y: 7, type: 'cross' },
        { x: 8, y: 6, type: 'bible' }
      ];
      score = 0;
      // ë‚˜ë¬´ ì¬ìƒì„±
      trees = [];
      for (let y = 0; y < mapH; y++) {
        for (let x = 0; x < mapW; x++) {
          if (Math.random() < 0.08) trees.push({x, y});
        }
      }
      gameOver = false;
      document.getElementById('score').textContent = 'ì ìˆ˜: 0';
      restartBtn.style.display = 'none';
      draw();
    }
    // ì²« ê·¸ë¦¬ê¸°
    draw();
  </script>
</body>
</html> 
