<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>숲 속 소년의 성경, 십자가 수집 게임</title>
  <style>
    body { background: #b2e59f; margin: 0; }
    canvas { display: block; margin: 30px auto; background: #7ec850; border: 3px solid #333; }
    #score { text-align: center; font-size: 1.5em; margin-top: 10px; }
  </style>
</head>
<body>
  <canvas id="game" width="480" height="320"></canvas>
  <div id="score">점수: 0</div>
  <div style="text-align:center;"><button id="restartBtn" style="display:none;font-size:1.2em;">다시 시작하기</button></div>
  <script>
    const canvas = document.getElementById('game');
    const ctx = canvas.getContext('2d');
    const tile = 40;
    const mapW = canvas.width / tile;
    const mapH = canvas.height / tile;
    // 캐릭터, 아이템 이모지
    const playerSVG = `<svg width="40" height="55" viewBox="0 0 80 110" xmlns="http://www.w3.org/2000/svg"><ellipse cx="40" cy="75" rx="24" ry="32" fill="#8AC6FF" stroke="#4682B4" stroke-width="2"/><ellipse cx="40" cy="36" rx="20" ry="21" fill="#FFD9A0" stroke="#E2BB7B" stroke-width="2"/><rect x="23" y="99" width="10" height="9" rx="5" fill="#444"/><rect x="47" y="99" width="10" height="9" rx="5" fill="#444"/><rect x="9" y="67" width="9" height="25" rx="4.5" fill="#FFD9A0" transform="rotate(-20 9 67)"/><rect x="62" y="67" width="9" height="25" rx="4.5" fill="#FFD9A0" transform="rotate(20 62 67)"/><ellipse cx="33" cy="34" rx="2.2" ry="3.2" fill="#252525"/><ellipse cx="47" cy="34" rx="2.2" ry="3.2" fill="#252525"/><ellipse cx="32.2" cy="33" rx="0.6" ry="0.9" fill="#fff" opacity="0.7"/><ellipse cx="46.2" cy="33" rx="0.6" ry="0.9" fill="#fff" opacity="0.7"/><path d="M34 42 Q40 48 46 42" stroke="#BB6C41" stroke-width="2" fill="none"/><path d="M22 30 Q40 18 58 30" stroke="#7B5823" stroke-width="6" fill="none" stroke-linecap="round"/><ellipse cx="23" cy="40" rx="5" ry="7" fill="#A78450"/><ellipse cx="57" cy="40" rx="5" ry="7" fill="#A78450"/><ellipse cx="32" cy="40" rx="2.4" ry="1.5" fill="#FFC2B5" opacity="0.5"/><ellipse cx="48" cy="40" rx="2.4" ry="1.5" fill="#FFC2B5" opacity="0.5"/></svg>`;
    const playerEmoji = new window.Image();
    playerEmoji.src = 'data:image/svg+xml;utf8,' + encodeURIComponent(playerSVG);
    const crossSVG = `<svg width="36" height="36" viewBox="0 0 36 36" xmlns="http://www.w3.org/2000/svg"><rect x="15" y="3" width="6" height="30" rx="3" fill="#fff"/><rect x="3" y="15" width="30" height="6" rx="3" fill="#fff"/><rect x="16" y="5" width="4" height="26" rx="2" fill="#FFD700"/><rect x="5" y="16" width="26" height="4" rx="2" fill="#FFD700"/><rect x="17.5" y="6" width="1" height="24" rx="0.7" fill="#d8b430" opacity="0.18"/><rect x="6" y="17.5" width="24" height="1" rx="0.7" fill="#d8b430" opacity="0.18"/></svg>`;
    const crossEmoji = new window.Image();
    crossEmoji.src = 'data:image/svg+xml;utf8,' + encodeURIComponent(crossSVG);
    crossEmoji.onload = draw;
    const bibleSVG = `<svg width="36" height="36" viewBox="0 0 36 36" xmlns="http://www.w3.org/2000/svg"><rect x="7" y="6" width="22" height="24" rx="4" fill="#243e74" stroke="#fff" stroke-width="2"/><rect x="9" y="26" width="18" height="3" rx="1.5" fill="#fff" opacity="0.25"/><rect x="16" y="14" width="4" height="8" rx="1" fill="#FFD700"/><rect x="14" y="17" width="8" height="2" rx="1" fill="#FFD700"/><rect x="27" y="7" width="2" height="22" rx="1" fill="#ffe9ab" opacity="0.82"/></svg>`;
    const bibleEmoji = new window.Image();
    bibleEmoji.src = 'data:image/svg+xml;utf8,' + encodeURIComponent(bibleSVG);
    bibleEmoji.onload = draw;
    // 플레이어
    let player = { x: 2, y: 2 };
    // 아이템들
    let items = [
      { x: 6, y: 4, type: 'cross' },
      { x: 10, y: 2, type: 'bible' },
      { x: 3, y: 7, type: 'cross' },
      { x: 8, y: 6, type: 'bible' }
    ];
    let score = 0;
    let gameOver = false;
    const restartBtn = document.getElementById('restartBtn');

    // 숲 배경 (나무 위치 고정)
    let trees = [];
    for (let y = 0; y < mapH; y++) {
      for (let x = 0; x < mapW; x++) {
        if (Math.random() < 0.08) trees.push({x, y});
      }
    }
    function draw() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      // 숲 배경 (나무 이모지 랜덤 배치)
      // for (let y = 0; y < mapH; y++) {
      //   for (let x = 0; x < mapW; x++) {
      //     if (Math.random() < 0.08) ctx.fillText('🌲', x * tile + 8, y * tile + 32);
      //   }
      // }
      // 숲 배경 (고정된 나무)
      // ctx.font = '32px serif';
      const treeSVG = `<svg width="40" height="40" viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg"><ellipse cx="20" cy="36" rx="8" ry="3" fill="#476034" opacity="0.18"/><rect x="17" y="28" width="6" height="8" rx="2" fill="#8D5C2A"/><ellipse cx="20" cy="22" rx="13" ry="12" fill="#55c049" stroke="#2a7526" stroke-width="2"/><ellipse cx="20" cy="14" rx="8" ry="7" fill="#71d97d" stroke="#3ea159" stroke-width="1.2"/><ellipse cx="24" cy="17" rx="3" ry="1.5" fill="#fff" opacity="0.18"/></svg>`;
      const treeImg = new window.Image();
      treeImg.src = 'data:image/svg+xml;utf8,' + encodeURIComponent(treeSVG);
      treeImg.onload = draw;
      trees.forEach(tree => {
        // ctx.fillText('🌲', tree.x * tile + 8, tree.y * tile + 32);
        ctx.drawImage(treeImg, tree.x * tile, tree.y * tile, tile, tile);
      });
      // 아이템
      items.forEach(item => {
        // ctx.font = '32px serif';
        // ctx.fillText(item.type === 'cross' ? crossEmoji : bibleEmoji, item.x * tile + 8, item.y * tile + 32);
      if (item.type === 'cross') {
          ctx.drawImage(crossEmoji, item.x * tile + 4, item.y * tile + 4, tile*0.8, tile*0.8);
      } else {
          ctx.drawImage(bibleEmoji, item.x * tile + 4, item.y * tile + 4, tile*0.8, tile*0.8);
      }
      });
      // 플레이어
      // ctx.font = '32px serif';
      // ctx.fillText(playerEmoji, player.x * tile + 8, player.y * tile + 32);
      ctx.drawImage(playerEmoji, player.x * tile, player.y * tile, tile, tile*1.3);
    }
    function update() {
      // 나무와 충돌 체크
      for (let i = 0; i < trees.length; i++) {
        if (trees[i].x === player.x && trees[i].y === player.y) {
          gameOver = true;
          document.getElementById('score').innerHTML = '점수: ' + score + '<br>게임 오버!';
          restartBtn.style.display = 'inline-block';
          return;
        }
      }
      // 아이템과 충돌 체크
      for (let i = items.length - 1; i >= 0; i--) {
        if (items[i].x === player.x && items[i].y === player.y) {
          score++;
          items.splice(i, 1);
          document.getElementById('score').textContent = '점수: ' + score;
        }
      }
      // 모든 아이템을 수집했는지 체크
      if (items.length === 0 && !gameOver) {
        gameOver = true;
        document.getElementById('score').innerHTML = '점수: ' + score + '<br>수집완료!';
        restartBtn.style.display = 'inline-block';
      }
    }
    document.addEventListener('keydown', e => {
      if (gameOver) return;
      if (e.key === 'ArrowUp' && player.y > 0) player.y--;
      if (e.key === 'ArrowDown' && player.y < mapH - 1) player.y++;
      if (e.key === 'ArrowLeft' && player.x > 0) player.x--;
      if (e.key === 'ArrowRight' && player.x < mapW - 1) player.x++;
      update();
      draw();
    });
    restartBtn.onclick = function() {
      // 게임 상태 초기화
      player = { x: 2, y: 2 };
      items = [
        { x: 6, y: 4, type: 'cross' },
        { x: 10, y: 2, type: 'bible' },
        { x: 3, y: 7, type: 'cross' },
        { x: 8, y: 6, type: 'bible' }
      ];
      score = 0;
      // 나무 재생성
      trees = [];
      for (let y = 0; y < mapH; y++) {
        for (let x = 0; x < mapW; x++) {
          if (Math.random() < 0.08) trees.push({x, y});
        }
      }
      gameOver = false;
      document.getElementById('score').textContent = '점수: 0';
      restartBtn.style.display = 'none';
      draw();
    }
    // 첫 그리기
    draw();
  </script>
</body>
</html> 
